<div
  *ngIf="faceitAccount$ && userStats$ | async; else skeletonTemplate"
  class="surface-section p-5"
>
  <app-user-informations
    [faceitAccount]="faceitAccount$ | async"
  ></app-user-informations>
</div>

<div class="p-5">
  <div class="grid">
    <div class="col-12 lg:col-6 xl:col-3">
      <app-rates
        [title]="'Win Rate'"
        [rate]="(userStats$ | async)?.lifetime['Wins'] + ' wins'"
        [average]="'%' + (userStats$ | async)?.lifetime['Win Rate %']"
        [text]="'win rate'"
        [icon]="'pi-percentage'"
      ></app-rates>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
      <app-rates
        [title]="'Average'"
        [rate]="(userStats$ | async)?.lifetime['Average K/D Ratio'] + ' K/D'"
        [average]="'%' + (userStats$ | async)?.lifetime['Average Headshots %']"
        [text]="'average headshots'"
        [icon]="'pi-percentage'"
      ></app-rates>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
      <app-rates
        [title]="'Streak'"
        [rate]="
          (userStats$ | async)?.lifetime['Longest Win Streak'] + ' longest'
        "
        [average]="(userStats$ | async)?.lifetime['Current Win Streak']"
        [text]="'current win streak'"
        [icon]="'pi-sort-numeric-down'"
      ></app-rates>
    </div>
    <div class="col-12 lg:col-6 xl:col-3">
      <app-rates
        [title]="'General'"
        [rate]="(userStats$ | async)?.lifetime['Matches'] + ' matches'"
        [average]="(userStats$ | async)?.lifetime['Total Headshots %']"
        [text]="'total headshots'"
        [icon]="'pi-sort-numeric-up-alt'"
      ></app-rates>
    </div>
    <div class="col-12 xl:col-8">
      <div class="surface-ground md:px-12 lg:px-12">
        <div class="grid">
          <div class="col-12 lg:col-12 p-2">
            <app-map-segments [segments$]="segments$"></app-map-segments>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 xl:col-4">
      <div class="surface-card shadow-2 border-round p-4">
        <div class="flex justify-content-between align-items-center mb-5">
          <span class="text-xl text-900 font-medium">Team Members</span>
        </div>
        <ul
          class="list-none p-0 m-0"
          *ngFor="let friend of listOfFriends$ | async"
        >
          <li
            class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4"
          >
            <div class="flex">
              <img
                [src]="friend?.avatar || 'assets/images/user-icon.png'"
                class="mr-3 border-circle"
                style="width: 45px; height: 45px"
              />
              <div>
                <span class="block text-900 font-medium mb-1">
                  {{ friend?.nickname }}
                </span>
                <div class="text-600">{{ friend?.steam_nickname }}</div>
              </div>
            </div>
            <div class="mt-2 md:mt-0 flex flex-nowrap">
              <a
                [href]="friend?.faceit_url"
                target="_blank"
                style="text-decoration: none"
              >
                <button
                  pButton
                  pRipple
                  icon="pi pi-arrow-up-right"
                  class="p-button-text p-button-rounded mr-1"
                ></button>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<ng-template #skeletonTemplate>
  <div class="surface-section">
    <app-user-informations-skeleton></app-user-informations-skeleton>
    <div class="p-5">
      <div class="grid">
        <div class="col-12 lg:col-6 xl:col-3">
          <app-rates-skeleton></app-rates-skeleton>
        </div>
        <div class="col-12 lg:col-6 xl:col-3">
          <app-rates-skeleton></app-rates-skeleton>
        </div>
        <div class="col-12 lg:col-6 xl:col-3">
          <app-rates-skeleton></app-rates-skeleton>
        </div>
        <div class="col-12 lg:col-6 xl:col-3">
          <app-rates-skeleton></app-rates-skeleton>
        </div>
        <div class="col-12 xl:col-7">
          <div class="surface-card shadow-2 border-round p-4">
            <div class="text-xl text-900 font-medium mb-5">Latest News</div>
            <ul class="list-none p-0 m-0">
              <li class="pb-3 border-bottom-1 surface-border">
                <div class="font-medium text-900 mb-2">
                  Aenean euismod elementum
                </div>
                <div class="line-height-3 text-600" style="max-width: 30rem">
                  Vitae turpis massa sed elementum tempus egestas sed sed risus.
                  In metus vulputate eu scelerisque felis imperdiet proin.
                </div>
              </li>
              <li class="py-3 border-bottom-1 surface-border">
                <div class="font-medium text-900 mb-2">
                  In iaculis nunc sed augue lacus
                </div>
                <div class="line-height-3 text-600" style="max-width: 30rem">
                  Viverra vitae congue. Nisi scelerisque eu ultrices vitae
                  auctor eu augue ut lectus. Elementum eu facilisis sed odio
                  morbi.
                </div>
              </li>
              <li class="py-3 border-bottom-1 surface-border">
                <div class="font-medium text-900 mb-2">
                  Proin sagittis nisl rhoncus
                </div>
                <div class="line-height-3 text-600" style="max-width: 30rem">
                  In pellentesque massa placerat duis ultricies lacus. Ac
                  feugiat sed lectus vestibulum mattis ullamcorper.
                </div>
              </li>
            </ul>
            <div class="flex justify-content-between pt-3">
              <button
                pButton
                pRipple
                label="Clear All"
                class="p-button-outlined p-button-secondary w-6 mr-2"
              ></button>
              <button
                pButton
                pRipple
                label="New Entry"
                class="p-button-outlined w-6 ml-2"
              ></button>
            </div>
          </div>
        </div>
        <div class="col-12 xl:col-5">
          <div class="surface-card shadow-2 border-round p-4">
            <div class="flex justify-content-between align-items-center mb-5">
              <span class="text-xl text-900 font-medium"
                ><p-skeleton width="10rem" height="2rem"></p-skeleton
              ></span>
            </div>
            <ul class="list-none p-0 m-0">
              <app-friend-list-skeleton></app-friend-list-skeleton>
              <app-friend-list-skeleton></app-friend-list-skeleton>
              <app-friend-list-skeleton></app-friend-list-skeleton>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
